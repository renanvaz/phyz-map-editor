Vue.filter("toURL",function(t){var i,e={a:/[\xE0-\xE6]/g,e:/[\xE8-\xEB]/g,i:/[\xEC-\xEF]/g,o:/[\xF2-\xF6]/g,u:/[\xF9-\xFC]/g,c:/\xE7/g,n:/\xF1/g};for(i in e)t=t.replace(e[i],i);return t.replace(/ /g,"-").toLowerCase()}),Vue.directive("draw-tiles",function(){});var MapEditor=function(){function t(t,i,e,s){var a,l,h,d;a=this,l="Default",d=e*s;var r={el:"#map-editor",data:{panels:{selected:"tiles",tiles:{selectedLayer:""},collisions:{},entities:{}},tiles:{width:t,height:i,limitX:e,limitY:s,src:"",data:[]},stage:{grid:{visible:!0,tiles:[]},collisions:{visible:!0,tiles:[]},layers:[],mousedown:!1,mode:"draw"}},methods:{selectPanel:function(t){this.panels.selected=t.target.dataset.panel}}};for(h=0;d>h;h++)r.data.stage.grid.tiles.push({x:h%r.data.tiles.limitX*r.data.tiles.width,y:~~(h/r.data.tiles.limitX)*r.data.tiles.height,width:r.data.tiles.width,height:r.data.tiles.height}),r.data.stage.collisions.tiles.push({x:h%r.data.tiles.limitX*r.data.tiles.width,y:~~(h/r.data.tiles.limitX)*r.data.tiles.height,width:r.data.tiles.width,height:r.data.tiles.height,value:!1});this.$listLayers=$("#list-layers").sortable({axis:"y",distance:5,start:function(t,i){i.item.data("start",i.item.index())},update:function(t,i){var e=i.item.data("start"),s=i.item.index();a.vm.stage.layers.splice(s,0,a.vm.stage.layers.splice(e,1)[0])}}),this.vm=new Vue(r),this.addLayer(l),this.addLayer("Test 1"),this.addLayer("Test 2"),this.addLayer("Test 3")}return t.prototype.addLayer=function(t){var i,e=this.vm.tiles.limitX*this.vm.tiles.limitY,s={title:t,visible:!0,tiles:[]};for(i=0;e>i;i++)s.tiles.push({x:i%this.vm.tiles.limitX*this.vm.tiles.width,y:~~(i/this.vm.tiles.limitX)*this.vm.tiles.height,width:this.vm.tiles.width,height:this.vm.tiles.height,value:!1});this.vm.stage.layers.push(s),this.vm.panels.tiles.selectedLayer||(this.vm.panels.tiles.selectedLayer=t),this.$listLayers.sortable("refresh")},t.prototype.addTile=function(t){var i=this,e=new Image;e.onload=function(){i.vm.tiles.src=t;var e,s=~~(this.width/i.vm.tiles.width),a=~~(this.height/i.vm.tiles.height),l=s*a;for(e=0;l>e;e++)i.vm.tiles.data.push({x:e%s*i.vm.tiles.width,y:~~(e/s)*i.vm.tiles.height})},e.src=t},t.prototype.export=function(){},t}();